<?xml version="1.0"?>
<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     
  xsi:noNamespaceSchemaLocation="https://community.rti.com/schema/6.0.0/rti_routing_service.xsd">
    <!--
    ********************************************************************** 
    RTI Routing Service with Security example                                            
    ********************************************************************** 
    This example bridges data from Domain 2 (secured domain) to 
	Domain 1 (unsecured domain)
    ********************************************************************** 
    -->

    <!-- 
    This is the routing service configuration for this example
    -->
    <routing_service name="security_example">

        <annotation>
            <documentation>
                Bridges data from Domain 2 (secured) to Domain 1 (unsecured)
            </documentation>
        </annotation>

        <domain_route name="DomainRoute" enabled="true">
		    <!-- Participant 1 is in Domain 1, an unsecured domain -->
            <participant name="1">
                <domain_id>1</domain_id>
            </participant>
			
			<!-- Participant 2 is in Domain 2, a secured domain -->
            <participant name="2">
                <domain_id>2</domain_id>
              <participant_qos>
                <property>
                  <value>
                    <element>
                      <name>com.rti.serv.load_plugin</name>
                      <value>com.rti.serv.secure</value>
                    </element>
                    <!-- Security can be enabled via XML with dynamic linking. If you
                 have a C or C++ application that is statically linked, please
                 refer to the Hello_security examples for instructions on how
                 to enable security.-->
                    <element>
                      <name>com.rti.serv.secure.library</name>
                      <value>nddssecurity</value>
                    </element>
                    <element>
                      <name>com.rti.serv.secure.create_function</name>
                      <value>RTI_Security_PluginSuite_create</value>
                    </element>
                    <element>
                      <name>dds.sec.auth.identity_ca</name>
                      <value>file:./dds_security_01/cert/cacertECdsa.pem</value>
                    </element>
                    <element>
                      <name>dds.sec.auth.identity_certificate</name>
                      <value>file:./dds_security_01/cert/D2_RSECdsa.pem</value>
                    </element>
                    <element>
                      <name>dds.sec.auth.private_key</name>
                      <value>file:./dds_security_01/cert/D2_RSkeyECdsa.pem</value>
                    </element>
                    <element>
                      <name>dds.sec.access.permissions_ca</name>
                      <value>file:./dds_security_01/cert/cacertECdsa.pem</value>
                    </element>
                    <element>
                      <name>dds.sec.access.governance</name>
                      <value>file:./dds_security_01/xml/signed/signed_Governance.p7s</value>
                    </element>
                    <element>
                      <name>dds.sec.access.permissions</name>
                      <value>file:./dds_security_01/xml/signed/signed_PermissionsD2_RS.p7s</value>
                    </element>
                  </value>
                  
                </property>
              </participant_qos>
            </participant>

            <!-- 
            A session with default configuration that contains a single topic route
            -->
            <session name="Session" enabled="true">

                <topic_route name="security_route">
                    <!-- Reading data from participant_2 -->
                    <input participant="2">
                        <registered_type_name>HelloWorld</registered_type_name>
                        <topic_name>Example HelloWorld</topic_name>
                    </input>
                    <output>
                        <registered_type_name>HelloWorld</registered_type_name>
                        <topic_name>Example HelloWorld</topic_name>
                    </output>
                </topic_route>

            </session>
        </domain_route>
    </routing_service>

</dds>
